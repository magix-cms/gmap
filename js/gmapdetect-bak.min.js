class GoogleMapDetect{constructor(tab,Libraries){this.g=Libraries;this.timer=null;this.tab=tab;this.addr=this.tab.querySelector(".address");this.postc=this.tab.querySelector(".postcode");this.city=this.tab.querySelector(".city");this.country=this.tab.querySelector(".country");this.lat=this.tab.querySelector(".lat");this.lng=this.tab.querySelector(".lng");this.init()}setLatLng(){let GM=this;let address=GM.addr.value+", "+GM.postc.value+" "+GM.city.value+", "+GM.country.value;let geocoder=new GM.g.Geocoder;geocoder.geocode({address:address},((results,status)=>{if(status===google.maps.GeocoderStatus.OK){GM.lat.value=results[0].geometry.location.lat();GM.lng.value=results[0].geometry.location.lng()}}))}updateTimer(callback,timeout){let GM=this;if(this.timer)clearTimeout(this.timer);this.timer=setTimeout(callback,timeout?timeout:1e3)}watch(field){let GM=this;field.addEventListener("keyup",(()=>{GM.updateTimer((()=>{GM.setLatLng()}))}));field.addEventListener("focusout",(()=>{GM.updateTimer((()=>{GM.setLatLng()}),100)}));field.addEventListener("change",(()=>{GM.updateTimer((()=>{GM.setLatLng()}),100)}))}init(){let GM=this;GM.watch(GM.addr);GM.watch(GM.postc);GM.watch(GM.city)}}async function initMap(){const{Geocoder:Geocoder}=await google.maps.importLibrary("geocoding");let tabs=document.querySelectorAll(".tab-pane");tabs.forEach((tab=>{tab.GM=new GoogleMapDetect(tab,{Geocoder:Geocoder})}))}(g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise((async(f,n)=>{await(a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,(t=>"_"+t[0].toLowerCase())),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)})));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then((()=>d[l](f,...n)))})({key:configMap.api_key,v:"weekly",lang:configMap.lang});initMap();